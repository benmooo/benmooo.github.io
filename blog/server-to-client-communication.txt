1:"$Sreact.fragment"
2:I[7555,[],""]
3:I[1295,[],""]
5:I[9665,[],"MetadataBoundary"]
7:I[9665,[],"OutletBoundary"]
a:I[4911,[],"AsyncMetadataOutlet"]
c:I[9665,[],"ViewportBoundary"]
e:I[6614,[],""]
:HL["/_next/static/media/569ce4b8f30dc480-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/media/7833d2e2b2ee9543-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/media/93f479601ee12b01-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/css/f30152c0704fba31.css","style"]
:HL["/_next/static/css/0ae26d81c63a9da9.css","style"]
:HL["/_next/static/css/c79e2679a18ceb00.css","style"]
:HL["/_next/static/css/0e4ee5feb628e00d.css","style"]
0:{"P":null,"b":"6F4L-wvSsck6PPlf3Pxnx","p":"","c":["","blog","server-to-client-communication"],"i":false,"f":[[["",{"children":["blog",{"children":[["slug","server-to-client-communication","d"],{"children":["__PAGE__",{}]}]}]},"$undefined","$undefined",true],["",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/f30152c0704fba31.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","link","1",{"rel":"stylesheet","href":"/_next/static/css/0ae26d81c63a9da9.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","link","2",{"rel":"stylesheet","href":"/_next/static/css/c79e2679a18ceb00.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","html",null,{"lang":"en","children":["$","body",null,{"className":"__variable_6d879b __variable_5cfdac __variable_9a8899 antialiased","children":["$","$L2",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L3",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":404}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],[]],"forbidden":"$undefined","unauthorized":"$undefined"}]}]}]]}],{"children":["blog",["$","$1","c",{"children":[null,["$","$L2",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L3",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":[["slug","server-to-client-communication","d"],["$","$1","c",{"children":[null,["$","$L2",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L3",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":["__PAGE__",["$","$1","c",{"children":["$L4",["$","$L5",null,{"children":"$L6"}],[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/0e4ee5feb628e00d.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","$L7",null,{"children":["$L8","$L9",["$","$La",null,{"promise":"$@b"}]]}]]}],{},null,false]},null,false]},null,false]},null,false],["$","$1","h",{"children":[null,["$","$1","ER-uEFaqFqG4hhLrIdsqk",{"children":[["$","$Lc",null,{"children":"$Ld"}],["$","meta",null,{"name":"next-size-adjust","content":""}]]}],null]}],false]],"m":"$undefined","G":["$e","$undefined"],"s":false,"S":true}
f:"$Sreact.suspense"
10:I[4911,[],"AsyncMetadata"]
6:["$","$f",null,{"fallback":null,"children":["$","$L10",null,{"promise":"$@11"}]}]
12:I[3565,["874","static/chunks/874-36030fac62063c21.js","63","static/chunks/63-5ad18c88ec2f5164.js","953","static/chunks/app/blog/%5Bslug%5D/page-ca6c25fdf74e0262.js"],"ImageWithFallback"]
14:I[6874,["874","static/chunks/874-36030fac62063c21.js","63","static/chunks/63-5ad18c88ec2f5164.js","953","static/chunks/app/blog/%5Bslug%5D/page-ca6c25fdf74e0262.js"],""]
9:null
4:["$","div",null,{"className":"min-h-screen bg-background text-foreground","children":["$","div",null,{"className":"max-w-2xl mx-auto px-4 py-12","children":["$","article",null,{"children":[["$","div",null,{"className":"relative w-full h-64 md:h-96 mb-8 rounded-lg overflow-hidden","children":["$","$L12",null,{"src":"/server-client-communication.png","alt":"Server-to-Client Communication","fill":true,"sizes":"width: 100vw; height: auto","className":"object-cover","priority":true,"fallbackSrc":"/missing-image.svg"}]}],["$","header",null,{"className":"mb-12","children":[["$","div",null,{"className":"flex flex-wrap gap-2 mb-6","children":[["$","span","实时通信",{"className":"text-xs px-3 py-1 bg-pink-100 dark:bg-pink-800 text-pink-600 dark:text-pink-400 rounded-lg","children":"实时通信"}],["$","span","消息推送",{"className":"text-xs px-3 py-1 bg-pink-100 dark:bg-pink-800 text-pink-600 dark:text-pink-400 rounded-lg","children":"消息推送"}],["$","span","Server-to-Client",{"className":"text-xs px-3 py-1 bg-pink-100 dark:bg-pink-800 text-pink-600 dark:text-pink-400 rounded-lg","children":"Server-to-Client"}]]}],["$","h1",null,{"className":"text-2xl md:text-4xl text-gray-900 dark:text-gray-100 mb-6 leading-tight","children":"Server-to-Client Communication"}],["$","p",null,{"className":"font-light text-md text-gray-600 dark:text-gray-400 leading-relaxed mb-6 italic","children":"各种 Server-to-Client 通信技术的优缺点和适用场景"}],["$","div",null,{"className":"flex items-center text-sm text-gray-500 dark:text-gray-500","children":["$","time",null,{"dateTime":"2024-12-19","children":"2024年12月19日"}]}],["$","div",null,{"className":"w-16 h-px bg-gray-300 dark:bg-gray-600 mt-8"}]]}],["$","article",null,{"className":"max-w-none prose prose-pink prose-img:rounded-lg prose-video:rounded-lg dark:prose-invert prose-a:text-foreground prose-a:decoration-6 prose-a:-underline-offset-2 prose-a:decoration-pink-300","children":"$L13"}],["$","footer",null,{"className":"mt-16 pt-8 border-t border-gray-200 dark:border-gray-700","children":["$","div",null,{"className":"flex justify-between items-center","children":[["$","$L14",null,{"href":"/blog","className":"text-sm text-gray-600 dark:text-gray-400 hover:text-pink-900 dark:hover:text-pink-100 transition-colors","children":"← 返回博客列表"}],["$","div",null,{"className":"flex items-center gap-2","children":[["$","span",null,{"className":"text-sm text-gray-500 dark:text-gray-500","children":"标签:"}],["$","div",null,{"className":"flex gap-1","children":[["$","span","实时通信",{"className":"text-xs px-2 py-1 bg-pink-100 dark:bg-pink-800 text-pink-600 dark:text-pink-400 rounded","children":"实时通信"}],["$","span","消息推送",{"className":"text-xs px-2 py-1 bg-pink-100 dark:bg-pink-800 text-pink-600 dark:text-pink-400 rounded","children":"消息推送"}],["$","span","Server-to-Client",{"className":"text-xs px-2 py-1 bg-pink-100 dark:bg-pink-800 text-pink-600 dark:text-pink-400 rounded","children":"Server-to-Client"}]]}]]}]]}]}]]}]}]}]
13:[["$","p",null,{"children":"最近的dentflex项目打算做聊天和实时的消息推送的功能 在此记录总结下Server to Client communication相关的技术 用以加深理解并为技术选择做一些论据"}],"\n",["$","p",null,{"children":["在深入具体技术之前，我们的主要矛盾是：",["$","strong",null,{"children":"HTTP 协议是请求-响应模式，服务器无法主动向客户端发送数据"}],"。"]}],"\n",["$","span",null,{"className":"katex-display","children":["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","display":"block","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":[["$","mtext",null,{"children":"Traditional HTTP"}],["$","mo",null,{"children":":"}],["$","mtext",null,{"children":"Client"}],["$","mover",null,{"children":[["$","mo",null,{"stretchy":"true","minsize":"3.0em","children":"→"}],["$","mpadded",null,{"width":"+0.6em","lspace":"0.3em","children":["$","mtext",null,{"children":"Request"}]}]]}],["$","mtext",null,{"children":"Server"}],["$","mover",null,{"children":[["$","mo",null,{"stretchy":"true","minsize":"3.0em","children":"→"}],["$","mpadded",null,{"width":"+0.6em","lspace":"0.3em","children":["$","mtext",null,{"children":"Response"}]}]]}],["$","mtext",null,{"children":"Client"}]]}],["$","annotation",null,{"encoding":"application/x-tex","children":"\\text{Traditional HTTP}: \\text{Client} \\xrightarrow{\\text{Request}} \\text{Server} \\xrightarrow{\\text{Response}} \\text{Client}"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":[["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.6944em"}}],["$","span",null,{"className":"mord text","children":["$","span",null,{"className":"mord","children":"Traditional HTTP"}]}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.2778em"}}],["$","span",null,{"className":"mrel","children":":"}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.2778em"}}]]}],["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"1.1113em","verticalAlign":"-0.011em"}}],["$","span",null,{"className":"mord text","children":["$","span",null,{"className":"mord","children":"Client"}]}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.2778em"}}],["$","span",null,{"className":"mrel x-arrow","children":["$","span",null,{"className":"vlist-t vlist-t2","children":[["$","span",null,{"className":"vlist-r","children":[["$","span",null,{"className":"vlist","style":{"height":"1.1003em"},"children":[["$","span",null,{"style":{"top":"-3.322em"},"children":[["$","span",null,{"className":"pstrut","style":{"height":"2.7em"}}],["$","span",null,{"className":"sizing reset-size6 size3 mtight x-arrow-pad","children":["$","span",null,{"className":"mord mtight","children":["$","span",null,{"className":"mord text mtight","children":["$","span",null,{"className":"mord mtight","children":"Request"}]}]}]}]]}],["$","span",null,{"className":"svg-align","style":{"top":"-2.689em"},"children":[["$","span",null,{"className":"pstrut","style":{"height":"2.7em"}}],["$","span",null,{"className":"hide-tail","style":{"height":"0.522em","minWidth":"1.469em"},"children":["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":"400em","height":"0.522em","viewBox":"0 0 400000 522","preserveAspectRatio":"xMaxYMin slice","children":["$","path",null,{"d":"M0 241v40h399891c-47.3 35.3-84 78-110 128\n-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20\n 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7\n 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85\n-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n 151.7 139 205zm0 0v40h399900v-40z"}]}]}]]}]]}],["$","span",null,{"className":"vlist-s","children":"​"}]]}],["$","span",null,{"className":"vlist-r","children":["$","span",null,{"className":"vlist","style":{"height":"0.011em"},"children":["$","span",null,{}]}]}]]}]}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.2778em"}}]]}],["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"1.1113em","verticalAlign":"-0.011em"}}],["$","span",null,{"className":"mord text","children":["$","span",null,{"className":"mord","children":"Server"}]}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.2778em"}}],["$","span",null,{"className":"mrel x-arrow","children":["$","span",null,{"className":"vlist-t vlist-t2","children":[["$","span",null,{"className":"vlist-r","children":[["$","span",null,{"className":"vlist","style":{"height":"1.1003em"},"children":[["$","span",null,{"style":{"top":"-3.322em"},"children":[["$","span",null,{"className":"pstrut","style":{"height":"2.7em"}}],["$","span",null,{"className":"sizing reset-size6 size3 mtight x-arrow-pad","children":["$","span",null,{"className":"mord mtight","children":["$","span",null,{"className":"mord text mtight","children":["$","span",null,{"className":"mord mtight","children":"Response"}]}]}]}]]}],["$","span",null,{"className":"svg-align","style":{"top":"-2.689em"},"children":[["$","span",null,{"className":"pstrut","style":{"height":"2.7em"}}],["$","span",null,{"className":"hide-tail","style":{"height":"0.522em","minWidth":"1.469em"},"children":["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":"400em","height":"0.522em","viewBox":"0 0 400000 522","preserveAspectRatio":"xMaxYMin slice","children":["$","path",null,{"d":"M0 241v40h399891c-47.3 35.3-84 78-110 128\n-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20\n 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7\n 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85\n-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n 151.7 139 205zm0 0v40h399900v-40z"}]}]}]]}]]}],["$","span",null,{"className":"vlist-s","children":"​"}]]}],["$","span",null,{"className":"vlist-r","children":["$","span",null,{"className":"vlist","style":{"height":"0.011em"},"children":["$","span",null,{}]}]}]]}]}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.2778em"}}]]}],["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.6944em"}}],["$","span",null,{"className":"mord text","children":["$","span",null,{"className":"mord","children":"Client"}]}]]}]]}]]}]}],"\n",["$","p",null,{"children":"但我们需要的是："}],"\n",["$","span",null,{"className":"katex-display","children":["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","display":"block","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":[["$","mtext",null,{"children":"Real-time Communication"}],["$","mo",null,{"children":":"}],["$","mtext",null,{"children":"Server"}],["$","mover",null,{"children":[["$","mo",null,{"stretchy":"true","minsize":"3.0em","children":"→"}],["$","mpadded",null,{"width":"+0.6em","lspace":"0.3em","children":["$","mtext",null,{"children":"Data Push"}]}]]}],["$","mtext",null,{"children":"Client"}]]}],["$","annotation",null,{"encoding":"application/x-tex","children":"\\text{Real-time Communication}: \\text{Server} \\xrightarrow{\\text{Data Push}} \\text{Client}"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":[["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.6944em"}}],["$","span",null,{"className":"mord text","children":["$","span",null,{"className":"mord","children":"Real-time Communication"}]}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.2778em"}}],["$","span",null,{"className":"mrel","children":":"}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.2778em"}}]]}],["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"1.1191em","verticalAlign":"-0.011em"}}],["$","span",null,{"className":"mord text","children":["$","span",null,{"className":"mord","children":"Server"}]}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.2778em"}}],["$","span",null,{"className":"mrel x-arrow","children":["$","span",null,{"className":"vlist-t vlist-t2","children":[["$","span",null,{"className":"vlist-r","children":[["$","span",null,{"className":"vlist","style":{"height":"1.1081em"},"children":[["$","span",null,{"style":{"top":"-3.322em"},"children":[["$","span",null,{"className":"pstrut","style":{"height":"2.7em"}}],["$","span",null,{"className":"sizing reset-size6 size3 mtight x-arrow-pad","children":["$","span",null,{"className":"mord mtight","children":["$","span",null,{"className":"mord text mtight","children":["$","span",null,{"className":"mord mtight","children":"Data Push"}]}]}]}]]}],["$","span",null,{"className":"svg-align","style":{"top":"-2.689em"},"children":[["$","span",null,{"className":"pstrut","style":{"height":"2.7em"}}],["$","span",null,{"className":"hide-tail","style":{"height":"0.522em","minWidth":"1.469em"},"children":["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":"400em","height":"0.522em","viewBox":"0 0 400000 522","preserveAspectRatio":"xMaxYMin slice","children":["$","path",null,{"d":"M0 241v40h399891c-47.3 35.3-84 78-110 128\n-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20\n 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7\n 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85\n-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n 151.7 139 205zm0 0v40h399900v-40z"}]}]}]]}]]}],["$","span",null,{"className":"vlist-s","children":"​"}]]}],["$","span",null,{"className":"vlist-r","children":["$","span",null,{"className":"vlist","style":{"height":"0.011em"},"children":["$","span",null,{}]}]}]]}]}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.2778em"}}]]}],["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.6944em"}}],["$","span",null,{"className":"mord text","children":["$","span",null,{"className":"mord","children":"Client"}]}]]}]]}]]}]}],"\n",["$","h3",null,{"children":"Solutions"}],"\n",["$","h4",null,{"children":"1. 轮询 (Polling) / 短轮询 (Short Polling)"}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":"原理"}],"\n客户端周期性地向服务器发送请求（例如，每隔几秒钟），询问是否有新的数据。"]}],"\n",["$","p",null,{"children":["$","strong",null,{"children":"优点"}]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"实现简单，兼容性好（所有浏览器都支持）"}],"\n"]}],"\n",["$","p",null,{"children":["$","strong",null,{"children":"缺点"}]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":[["$","strong",null,{"children":"效率低下"}],"：大部分请求可能是无用的，增加了服务器的负担和网络流量"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"延迟"}],"：数据更新的延迟取决于轮询间隔，间隔越长延迟越高"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"实时性差"}],"：无法做到真正的实时推送"]}],"\n"]}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":"适用场景"}],"\n对实时性要求不高，数据更新频率较低的场景，如获取新闻列表、订单状态等。"]}],"\n",["$","hr",null,{}],"\n",["$","h4",null,{"children":"2. 长轮询 (Long Polling)"}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":"原理"}],"\n客户端向服务器发送请求后，服务器会保持连接打开，直到有新数据可用或者达到超时时间。一旦有新数据，服务器立即响应并关闭连接。客户端收到响应后，会立即发送新的请求以重新建立连接。"]}],"\n",["$","p",null,{"children":["$","strong",null,{"children":"优点"}]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"比短轮询更高效，减少了无谓的请求，实时性相对更好"}],"\n"]}],"\n",["$","p",null,{"children":["$","strong",null,{"children":"缺点"}]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":[["$","strong",null,{"children":"服务器资源占用"}],"：连接在服务器端长时间保持打开，占用服务器资源"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"复杂性增加"}],"：需要服务器端对连接进行管理，实现起来相对复杂"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"仍然存在延迟"}],"：在数据到达和客户端收到响应之间可能仍有轻微延迟"]}],"\n"]}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":"适用场景"}],"\n对实时性有一定要求，但又不至于需要毫秒级延迟的场景，如聊天室（早期的实现方式）、在线文档协作等。"]}],"\n",["$","hr",null,{}],"\n",["$","h4",null,{"children":"3. HTTP Streaming (流式传输 / HTTP Pipelining)"}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":"原理"}],"\n客户端发起一个请求，服务器保持连接打开，并周期性地向客户端发送数据，而不是关闭连接。数据以\"块\"的形式传输。"]}],"\n",["$","p",null,{"children":["$","strong",null,{"children":"优点"}]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"减少了重复建立连接的开销，实时性比轮询更好"}],"\n"]}],"\n",["$","p",null,{"children":["$","strong",null,{"children":"缺点"}]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":[["$","strong",null,{"children":"数据解析复杂"}],"：客户端需要能够处理分块传输的数据"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"服务器端实现复杂"}],"：需要特殊的服务器配置和处理"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"中间代理问题"}],"：某些代理服务器可能会缓存数据，导致延迟或中断"]}],"\n"]}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":"适用场景"}],"\n数据持续不断地从服务器发送到客户端，如股票报价、日志流等。"]}],"\n",["$","hr",null,{}],"\n",["$","h4",null,{"children":"4. WebSocket"}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":"原理"}],"\n在客户端和服务器之间建立一个持久化的、双向的通信通道。一旦建立，双方可以随时互相发送数据，而无需重复建立 HTTP 连接。"]}],"\n",["$","p",null,{"children":["$","strong",null,{"children":"优点"}]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":[["$","strong",null,{"children":"全双工通信"}],"：客户端和服务器可以同时发送和接收数据"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"低延迟"}],"：建立连接后，数据传输效率高，延迟极低，真正实现实时通信"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"协议开销小"}],"：相比 HTTP，WebSocket 的数据帧非常轻量"]}],"\n"]}],"\n",["$","p",null,{"children":["$","strong",null,{"children":"缺点"}]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":[["$","strong",null,{"children":"兼容性"}],"：虽然现代浏览器支持良好，但对于老旧浏览器可能需要降级方案（如使用 SockJS 库）"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"服务器资源"}],"：维持大量持久连接会占用服务器资源"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"代理问题"}],"：需要代理服务器支持 WebSocket 协议升级"]}],"\n"]}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":"适用场景"}],"\n几乎所有需要实时双向通信的场景，如在线聊天、多人游戏、实时协作、直播弹幕、股票实时行情等。"]}],"\n",["$","hr",null,{}],"\n",["$","h4",null,{"children":"5. Server-Sent Events (SSE)"}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":"原理"}],"\n基于 HTTP 协议，客户端发起一个请求，服务器保持连接打开，并可以单向地持续向客户端推送数据。它是一种只支持服务器到客户端单向通信的流式技术。"]}],"\n",["$","p",null,{"children":["$","strong",null,{"children":"优点"}]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":[["$","strong",null,{"children":"简单易用"}],"：基于 HTTP 协议，比 WebSocket 更容易实现和部署"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"自动重连"}],"：客户端（浏览器）提供了内置的 EventSource API，支持自动重连"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"协议开销小"}],"：数据格式简单，通常是文本"]}],"\n"]}],"\n",["$","p",null,{"children":["$","strong",null,{"children":"缺点"}]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":[["$","strong",null,{"children":"单向通信"}],"：客户端无法通过同一个连接向服务器发送数据（如果需要，仍需使用额外的 AJAX 或 WebSocket）"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"二进制数据支持差"}],"：主要用于传输文本数据"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"连接数限制"}],"：和 HTTP 连接一样，受限于浏览器对同一域名最大连接数的限制（通常是 6-8 个）"]}],"\n"]}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":"适用场景"}],"\n服务器需要持续向客户端推送更新的场景，如新闻推送、股票报价、体育赛事实时比分、通知中心、在线日志输出等，且客户端无需向服务器频繁发送消息。"]}],"\n",["$","hr",null,{}],"\n",["$","h4",null,{"children":"6. Webhooks"}],"\n",["$","p",null,{"children":"Webhooks 不是一个客户端主动建立并保持的连接，而是一种\"推\"（Push）机制，由服务器发起，通常是服务器之间（Server-to-Server）的通信，但最终目的是通知客户端或更新客户端能访问到的数据。"}],"\n",["$","h5",null,{"children":"Webhooks 的工作原理"}],"\n",["$","ol",null,{"children":["\n",["$","li",null,{"children":["\n",["$","p",null,{"children":[["$","strong",null,{"children":"注册回调 URL"}],"：客户端（通常是应用服务器，而不是直接的浏览器前端）在另一个服务（例如 GitHub、Stripe、Shopify 等）上注册一个公开可访问的 URL。这个 URL 就是\"Webhook 端点\"。"]}],"\n"]}],"\n",["$","li",null,{"children":["\n",["$","p",null,{"children":[["$","strong",null,{"children":"事件触发"}],"：当在那个服务上发生特定事件（如 GitHub 上的代码提交、Stripe 上的支付完成、Shopify 上的订单创建）时，该服务会向注册的 Webhook URL 发送一个 HTTP POST 请求。"]}],"\n"]}],"\n",["$","li",null,{"children":["\n",["$","p",null,{"children":[["$","strong",null,{"children":"接收和处理"}],"：应用服务器接收到这个 POST 请求，并解析请求体中的数据（通常是 JSON 格式），从而得知发生了什么事件及其相关信息。"]}],"\n"]}],"\n",["$","li",null,{"children":["\n",["$","p",null,{"children":[["$","strong",null,{"children":"后续处理"}],"：服务器根据接收到的事件数据进行相应的处理，例如："]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"更新数据库"}],"\n",["$","li",null,{"children":"触发内部逻辑"}],"\n"]}],"\n"]}],"\n"]}],"\n",["$","p",null,{"children":"然后，如果我们需要将这个更新通知给最终用户（浏览器客户端），应用服务器会使用上面提到的某种\"Server-to-Client communication\"技术（如 WebSocket 或 SSE）来将信息推送到用户的浏览器。"}],"\n",["$","p",null,{"children":"Webhooks 本身是 Server-to-Server 的通知机制。但它常常作为更大系统架构的一部分，来支撑最终的 Server-to-Client 实时更新。"}]]
d:[["$","meta","0",{"charSet":"utf-8"}],["$","meta","1",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]
8:null
11:{"metadata":[["$","title","0",{"children":"Server-to-Client Communication | 格物致知"}],["$","meta","1",{"name":"description","content":"各种 Server-to-Client 通信技术的优缺点和适用场景"}],["$","meta","2",{"name":"keywords","content":"Server-to-Client,实时通信,WebSocket,Server-Sent Events,长轮询,HTTP Streaming,Webhooks,聊天系统,消息推送,实时应用,前端架构"}],["$","meta","3",{"property":"og:title","content":"Server-to-Client Communication"}],["$","meta","4",{"property":"og:description","content":"各种 Server-to-Client 通信技术的优缺点和适用场景"}],["$","meta","5",{"property":"og:image","content":"http://localhost:3000/server-client-communication.png"}],["$","meta","6",{"property":"og:image:alt","content":"Server-to-Client Communication"}],["$","meta","7",{"property":"og:type","content":"article"}],["$","meta","8",{"property":"article:published_time","content":"2024-12-19"}],["$","meta","9",{"name":"twitter:card","content":"summary_large_image"}],["$","meta","10",{"name":"twitter:title","content":"Server-to-Client Communication"}],["$","meta","11",{"name":"twitter:description","content":"各种 Server-to-Client 通信技术的优缺点和适用场景"}],["$","meta","12",{"name":"twitter:image","content":"http://localhost:3000/server-client-communication.png"}]],"error":null,"digest":"$undefined"}
b:{"metadata":"$11:metadata","error":null,"digest":"$undefined"}
